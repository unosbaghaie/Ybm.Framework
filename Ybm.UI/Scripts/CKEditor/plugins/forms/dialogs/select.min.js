CKEDITOR.dialog.add("select",function(n){function i(n,i,r,u,f){if(n=t(n),u=u?u.createElement("OPTION"):document.createElement("OPTION"),n&&u&&"option"==u.getName())CKEDITOR.env.ie?(isNaN(parseInt(f,10))?n.$.options.add(u.$):n.$.options.add(u.$,f),u.$.innerHTML=0<i.length?i:"",u.$.value=r):(null!==f&&f<n.getChildCount()?n.getChild(0>f?0:f).insertBeforeMe(u):n.append(u),u.setText(0<i.length?i:""),u.setValue(r));else return!1;return u}function s(n){for(var n=t(n),u=r(n),i=n.getChildren().count()-1;0<=i;i--)n.getChild(i).$.selected&&n.getChild(i).remove();f(n,u)}function h(n,i,r,u){return(n=t(n),0>i)?!1:(n=n.getChild(i),n.setText(r),n.setValue(u),n)}function e(n){for(n=t(n);n.getChild(0)&&n.getChild(0).remove(););}function u(n,u,e){var n=t(n),o=r(n);if(0>o||(u=o+u,u=0>u?0:u,u=u>=n.getChildCount()?n.getChildCount()-1:u,o==u))return!1;var o=n.getChild(o),s=o.getText(),h=o.getValue();return o.remove(),o=i(n,s,h,e?e:null,u),f(n,u),o}function r(n){return(n=t(n))?n.$.selectedIndex:-1}function f(n,i){if(n=t(n),0>i)return null;var r=n.getChildren().count();return n.$.selectedIndex=i>=r?r-1:i,n}function o(n){return(n=t(n))?n.getChildren():!1}function t(n){return n&&n.domId&&n.getInputElement().$?n.getInputElement():n&&n.$?n:!1}return{title:n.lang.forms.select.title,minWidth:CKEDITOR.env.ie?460:395,minHeight:CKEDITOR.env.ie?320:300,onShow:function(){var n,t;if(delete this.selectBox,this.setupContent("clear"),n=this.getParentEditor().getSelection().getSelectedElement(),n&&"select"==n.getName())for(this.selectBox=n,this.setupContent(n.getName(),n),n=o(n),t=0;t<n.count();t++)this.setupContent("option",n.getItem(t))},onOk:function(){var t=this.getParentEditor(),n=this.selectBox,r=!n,i,u;r&&(n=t.document.createElement("select"));this.commitContent(n);r&&(t.insertElement(n),CKEDITOR.env.ie)&&(i=t.getSelection(),u=i.createBookmarks(),setTimeout(function(){i.selectBookmarks(u)},0))},contents:[{id:"info",label:n.lang.forms.select.selectInfo,title:n.lang.forms.select.selectInfo,accessKey:"",elements:[{id:"txtName",type:"text",widths:["25%","75%"],labelLayout:"horizontal",label:n.lang.common.name,"default":"",accessKey:"N",style:"width:350px",setup:function(n,t){"clear"==n?this.setValue(this["default"]||""):"select"==n&&this.setValue(t.data("cke-saved-name")||t.getAttribute("name")||"")},commit:function(n){this.getValue()?n.data("cke-saved-name",this.getValue()):(n.data("cke-saved-name",!1),n.removeAttribute("name"))}},{id:"txtValue",type:"text",widths:["25%","75%"],labelLayout:"horizontal",label:n.lang.forms.select.value,style:"width:350px","default":"",className:"cke_disabled",onLoad:function(){this.getInputElement().setAttribute("readOnly",!0)},setup:function(n,t){"clear"==n?this.setValue(""):"option"==n&&t.getAttribute("selected")&&this.setValue(t.$.value)}},{type:"hbox",widths:["175px","170px"],children:[{id:"txtSize",type:"text",labelLayout:"horizontal",label:n.lang.forms.select.size,"default":"",accessKey:"S",style:"width:175px",validate:function(){var t=CKEDITOR.dialog.validate.integer(n.lang.common.validateNumberFailed);return""===this.getValue()||t.apply(this)},setup:function(n,t){"select"==n&&this.setValue(t.getAttribute("size")||"");CKEDITOR.env.webkit&&this.getInputElement().setStyle("width","86px")},commit:function(n){this.getValue()?n.setAttribute("size",this.getValue()):n.removeAttribute("size")}},{type:"html",html:"<span>"+CKEDITOR.tools.htmlEncode(n.lang.forms.select.lines)+"<\/span>"}]},{type:"html",html:"<span>"+CKEDITOR.tools.htmlEncode(n.lang.forms.select.opAvail)+"<\/span>"},{type:"hbox",widths:["115px","115px","100px"],children:[{type:"vbox",children:[{id:"txtOptName",type:"text",label:n.lang.forms.select.opText,style:"width:115px",setup:function(n){"clear"==n&&this.setValue("")}},{type:"select",id:"cmbName",label:"",title:"",size:5,style:"width:115px;height:75px",items:[],onChange:function(){var n=this.getDialog(),t=n.getContentElement("info","cmbValue"),i=n.getContentElement("info","txtOptName"),n=n.getContentElement("info","txtOptValue"),u=r(this);f(t,u);i.setValue(this.getValue());n.setValue(t.getValue())},setup:function(n,t){"clear"==n?e(this):"option"==n&&i(this,t.getText(),t.getText(),this.getDialog().getParentEditor().document)},commit:function(n){var r=this.getDialog(),f=o(this),s=o(r.getContentElement("info","cmbValue")),h=r.getContentElement("info","txtValue").getValue(),t,u;for(e(n),t=0;t<f.count();t++)u=i(n,f.getItem(t).getValue(),s.getItem(t).getValue(),r.getParentEditor().document),s.getItem(t).getValue()==h&&(u.setAttribute("selected","selected"),u.selected=!0)}}]},{type:"vbox",children:[{id:"txtOptValue",type:"text",label:n.lang.forms.select.opValue,style:"width:115px",setup:function(n){"clear"==n&&this.setValue("")}},{type:"select",id:"cmbValue",label:"",size:5,style:"width:115px;height:75px",items:[],onChange:function(){var n=this.getDialog(),t=n.getContentElement("info","cmbName"),i=n.getContentElement("info","txtOptName"),n=n.getContentElement("info","txtOptValue"),u=r(this);f(t,u);i.setValue(t.getValue());n.setValue(this.getValue())},setup:function(n,t){if("clear"==n)e(this);else if("option"==n){var r=t.getValue();i(this,r,r,this.getDialog().getParentEditor().document);"selected"==t.getAttribute("selected")&&this.getDialog().getContentElement("info","txtValue").setValue(r)}}}]},{type:"vbox",padding:5,children:[{type:"button",id:"btnAdd",style:"",label:n.lang.forms.select.btnAdd,title:n.lang.forms.select.btnAdd,style:"width:100%;",onClick:function(){var n=this.getDialog();n.getParentEditor();var t=n.getContentElement("info","txtOptName"),r=n.getContentElement("info","txtOptValue"),u=n.getContentElement("info","cmbName"),f=n.getContentElement("info","cmbValue");i(u,t.getValue(),t.getValue(),n.getParentEditor().document);i(f,r.getValue(),r.getValue(),n.getParentEditor().document);t.setValue("");r.setValue("")}},{type:"button",id:"btnModify",label:n.lang.forms.select.btnModify,title:n.lang.forms.select.btnModify,style:"width:100%;",onClick:function(){var n=this.getDialog(),i=n.getContentElement("info","txtOptName"),u=n.getContentElement("info","txtOptValue"),f=n.getContentElement("info","cmbName"),n=n.getContentElement("info","cmbValue"),t=r(f);0<=t&&(h(f,t,i.getValue(),i.getValue()),h(n,t,u.getValue(),u.getValue()))}},{type:"button",id:"btnUp",style:"width:100%;",label:n.lang.forms.select.btnUp,title:n.lang.forms.select.btnUp,onClick:function(){var n=this.getDialog(),t=n.getContentElement("info","cmbName"),i=n.getContentElement("info","cmbValue");u(t,-1,n.getParentEditor().document);u(i,-1,n.getParentEditor().document)}},{type:"button",id:"btnDown",style:"width:100%;",label:n.lang.forms.select.btnDown,title:n.lang.forms.select.btnDown,onClick:function(){var n=this.getDialog(),t=n.getContentElement("info","cmbName"),i=n.getContentElement("info","cmbValue");u(t,1,n.getParentEditor().document);u(i,1,n.getParentEditor().document)}}]}]},{type:"hbox",widths:["40%","20%","40%"],children:[{type:"button",id:"btnSetValue",label:n.lang.forms.select.btnSetValue,title:n.lang.forms.select.btnSetValue,onClick:function(){var n=this.getDialog(),t=n.getContentElement("info","cmbValue");n.getContentElement("info","txtValue").setValue(t.getValue())}},{type:"button",id:"btnDelete",label:n.lang.forms.select.btnDelete,title:n.lang.forms.select.btnDelete,onClick:function(){var n=this.getDialog(),t=n.getContentElement("info","cmbName"),i=n.getContentElement("info","cmbValue"),r=n.getContentElement("info","txtOptName"),n=n.getContentElement("info","txtOptValue");s(t);s(i);r.setValue("");n.setValue("")}},{id:"chkMulti",type:"checkbox",label:n.lang.forms.select.chkMulti,"default":"",accessKey:"M",value:"checked",setup:function(n,t){"select"==n&&this.setValue(t.getAttribute("multiple"));CKEDITOR.env.webkit&&this.getElement().getParent().setStyle("vertical-align","middle")},commit:function(n){this.getValue()?n.setAttribute("multiple",this.getValue()):n.removeAttribute("multiple")}}]}]}]}});
//# sourceMappingURL=select.min.js.map
