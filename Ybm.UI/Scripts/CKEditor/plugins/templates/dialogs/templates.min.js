(function(){CKEDITOR.dialog.add("templates",function(n){function e(n,t){var r=CKEDITOR.dom.element.createFromHtml('<a href="javascript:void(0)" tabIndex="-1" role="option" ><div class="cke_tpl_item"><\/div><\/a>'),i='<table style="width:350px;" class="cke_tpl_preview" role="presentation"><tr>';n.image&&t&&(i+='<td class="cke_tpl_preview_img"><img src="'+CKEDITOR.getUrl(t+n.image)+'"'+(CKEDITOR.env.ie6Compat?' onload="this.width=this.width"':"")+' alt="" title=""><\/td>');i+='<td style="white-space:normal;"><span class="cke_tpl_title">'+n.title+"<\/span><br/>";n.description&&(i+="<span>"+n.description+"<\/span>");r.getFirst().setHtml(i+"<\/td><\/tr><\/table>");r.on("click",function(){o(n.html)});return r}function o(t){var i=CKEDITOR.dialog.getCurrent();i.getValueOf("selectTpl","chkInsertOpt")?(n.fire("saveSnapshot"),n.setData(t,function(){i.hide();var t=n.createRange();t.moveToElementEditStart(n.editable());t.select();setTimeout(function(){n.fire("saveSnapshot")},0)})):(n.insertHtml(t),i.hide())}function f(n){var i=n.data.getTarget(),f=t.equals(i),e,u,r;if((f||t.contains(i))&&(e=n.data.getKeystroke(),u=t.getElementsByTag("a"),u)){if(f)r=u.getItem(0);else switch(e){case 40:r=i.getNext();break;case 38:r=i.getPrevious();break;case 13:case 32:i.fire("click")}r&&(r.focus(),n.data.preventDefault())}}var r=CKEDITOR.plugins.get("templates");CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(r.path+"dialogs/templates.css"));var t,r="cke_tpl_list_label_"+CKEDITOR.tools.getNextNumber(),i=n.lang.templates,u=n.config;return{title:n.lang.templates.title,minWidth:CKEDITOR.env.ie?440:400,minHeight:340,contents:[{id:"selectTpl",label:i.title,elements:[{type:"vbox",padding:5,children:[{id:"selectTplText",type:"html",html:"<span>"+i.selectPromptMsg+"<\/span>"},{id:"templatesList",type:"html",focus:!0,html:'<div class="cke_tpl_list" tabIndex="-1" role="listbox" aria-labelledby="'+r+'"><div class="cke_tpl_loading"><span><\/span><\/div><\/div><span class="cke_voice_label" id="'+r+'">'+i.options+"<\/span>"},{id:"chkInsertOpt",type:"checkbox",label:i.insertOption,"default":u.templates_replaceContent}]}]}],buttons:[CKEDITOR.dialog.cancelButton],onShow:function(){var n=this.getContentElement("selectTpl","templatesList");t=n.getElement();CKEDITOR.loadTemplates(u.templates_files,function(){var h=(u.templates||"default").split(","),c,r,l,s;if(h.length){for(c=t,c.setHtml(""),r=0,l=h.length;r<l;r++)for(var f=CKEDITOR.getTemplates(h[r]),v=f.imagesPath,f=f.templates,a=f.length,o=0;o<a;o++)s=e(f[o],v),s.setAttribute("aria-posinset",o+1),s.setAttribute("aria-setsize",a),c.append(s);n.focus()}else t.setHtml('<div class="cke_tpl_empty"><span>'+i.emptyListMsg+"<\/span><\/div>")});this._.element.on("keydown",f)},onHide:function(){this._.element.removeListener("keydown",f)}}})})();
//# sourceMappingURL=templates.min.js.map
