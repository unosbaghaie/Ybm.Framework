CKEDITOR.dialog.add("specialchar",function(n){var r,f=n.lang.specialchar,e=function(t){var i,t=t.data?t.data.getTarget():new CKEDITOR.dom.element(t);"a"==t.getName()&&(i=t.getChild(0).getHtml())&&(t.removeClass("cke_light_background"),r.hide(),t=n.document.createElement("span"),t.setHtml(i),n.insertText(t.getText()))},o=CKEDITOR.tools.addFunction(e),u,i=function(n,i){var f,i=i||n.data.getTarget(),e;"span"==i.getName()&&(i=i.getParent());"a"==i.getName()&&(f=i.getChild(0).getHtml())&&(u&&t(null,u),e=r.getContentElement("info","htmlPreview").getElement(),r.getContentElement("info","charPreview").getElement().setHtml(f),e.setHtml(CKEDITOR.tools.htmlEncode(f)),i.getParent().addClass("cke_light_background"),u=i)},t=function(n,t){t=t||n.data.getTarget();"span"==t.getName()&&(t=t.getParent());"a"==t.getName()&&(r.getContentElement("info","charPreview").getElement().setHtml("&nbsp;"),r.getContentElement("info","htmlPreview").getElement().setHtml("&nbsp;"),t.getParent().removeClass("cke_light_background"),u=void 0)},s=CKEDITOR.tools.addFunction(function(r){var r=new CKEDITOR.dom.event(r),f=r.getTarget(),u,o;u=r.getKeystroke();o="rtl"==n.lang.dir;switch(u){case 38:(u=f.getParent().getParent().getPrevious())&&(u=u.getChild([f.getParent().getIndex(),0]),u.focus(),t(null,f),i(null,u));r.preventDefault();break;case 40:(u=f.getParent().getParent().getNext())&&(u=u.getChild([f.getParent().getIndex(),0]))&&1==u.type&&(u.focus(),t(null,f),i(null,u));r.preventDefault();break;case 32:e({data:r});r.preventDefault();break;case o?37:39:(u=f.getParent().getNext())?(u=u.getChild(0),1==u.type?(u.focus(),t(null,f),i(null,u),r.preventDefault(!0)):t(null,f)):(u=f.getParent().getParent().getNext())&&((u=u.getChild([0,0]))&&1==u.type?(u.focus(),t(null,f),i(null,u),r.preventDefault(!0)):t(null,f));break;case o?39:37:(u=f.getParent().getPrevious())?(u=u.getChild(0),u.focus(),t(null,f),i(null,u),r.preventDefault(!0)):(u=f.getParent().getParent().getPrevious())?(u=u.getLast().getChild(0),u.focus(),t(null,f),i(null,u),r.preventDefault(!0)):t(null,f)}});return{title:f.title,minWidth:430,minHeight:280,buttons:[CKEDITOR.dialog.cancelButton],charColumns:17,onLoad:function(){for(var e,h,v=this.definition.charColumns,c=n.config.specialChars,l=CKEDITOR.tools.getNextId()+"_specialchar_table_label",i=['<table role="listbox" aria-labelledby="'+l+'" style="width: 320px; height: 100%; border-collapse: separate;" align="center" cellspacing="2" cellpadding="2" border="0">'],u=0,a=c.length,t,r;u<a;){for(i.push('<tr role="presentation">'),e=0;e<v;e++,u++)(t=c[u])?(t instanceof Array?(r=t[1],t=t[0]):(r=t.replace("&","").replace(";","").replace("#",""),r=f[r]||t),h="cke_specialchar_label_"+u+"_"+CKEDITOR.tools.getNextNumber(),i.push('<td class="cke_dark_background" style="cursor: default" role="presentation"><a href="javascript: void(0);" role="option" aria-posinset="'+(u+1)+'"',' aria-setsize="'+a+'"',' aria-labelledby="'+h+'"',' class="cke_specialchar" title="',CKEDITOR.tools.htmlEncode(r),'" onkeydown="CKEDITOR.tools.callFunction( '+s+', event, this )" onclick="CKEDITOR.tools.callFunction('+o+', this); return false;" tabindex="-1"><span style="margin: 0 auto;cursor: inherit">'+t+'<\/span><span class="cke_voice_label" id="'+h+'">'+r+"<\/span><\/a>")):i.push('<td class="cke_dark_background">&nbsp;'),i.push("<\/td>");i.push("<\/tr>")}i.push("<\/tbody><\/table>",'<span id="'+l+'" class="cke_voice_label">'+f.options+"<\/span>");this.getContentElement("info","charContainer").getElement().setHtml(i.join(""))},contents:[{id:"info",label:n.lang.common.generalTab,title:n.lang.common.generalTab,padding:0,align:"top",elements:[{type:"hbox",align:"top",widths:["320px","90px"],children:[{type:"html",id:"charContainer",html:"",onMouseover:i,onMouseout:t,focus:function(){var n=this.getElement().getElementsByTag("a").getItem(0);setTimeout(function(){n.focus();i(null,n)},0)},onShow:function(){var n=this.getElement().getChild([0,0,0,0,0]);setTimeout(function(){n.focus();i(null,n)},0)},onLoad:function(n){r=n.sender}},{type:"hbox",align:"top",widths:["100%"],children:[{type:"vbox",align:"top",children:[{type:"html",html:"<div><\/div>"},{type:"html",id:"charPreview",className:"cke_dark_background",style:"border:1px solid #eeeeee;font-size:28px;height:40px;width:70px;padding-top:9px;font-family:'Microsoft Sans Serif',Arial,Helvetica,Verdana;text-align:center;",html:"<div>&nbsp;<\/div>"},{type:"html",id:"htmlPreview",className:"cke_dark_background",style:"border:1px solid #eeeeee;font-size:14px;height:20px;width:70px;padding-top:2px;font-family:'Microsoft Sans Serif',Arial,Helvetica,Verdana;text-align:center;",html:"<div>&nbsp;<\/div>"}]}]}]}]}]}});
//# sourceMappingURL=specialchar.min.js.map
